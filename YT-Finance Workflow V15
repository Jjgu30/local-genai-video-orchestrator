{
  "name": "YT-Finance Workflow V15",
  "nodes": [
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "srtContent",
        "options": {
          "fileName": "captions.srt"
        }
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        1744,
        960
      ],
      "id": "3407e18a-dfe6-487e-9541-2bf10c8ad73e",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776290,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604671,
                "operator": "empty"
              },
              {
                "field": 6604661,
                "operator": "not_empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        976,
        2240
      ],
      "id": "f1967114-4d7f-4db3-8636-3d20a64fc477",
      "name": "Get Scenes",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1184,
        2240
      ],
      "id": "806cf198-f213-4cae-a0a8-c5bf8c87042d",
      "name": "Loop Over Items"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        688,
        2240
      ],
      "id": "b1802a91-933c-4dda-b880-532d6816d24e",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "jsCode": "// Extract the array of URLs\nconst urls = items[0].json[\"Video Clip URL\"] || [];\n\n// Map URLs into the required structure\nconst formattedURLs = urls.map(url => ({ \"video_url\": url }));\n\n// Return the transformed data\nreturn [{\n    json: {\n        \"video_urls\": formattedURLs\n    }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1712,
        3088
      ],
      "id": "832e0ed0-c354-4063-81d6-260b40ba1397",
      "name": "Video URL to Array"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:8080/v1/video/concatenate",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"video_urls\": {{ JSON.stringify($json.video_urls) }},\n    \"id\": \"{{ $('Get Videos').item.json.id }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1904,
        3088
      ],
      "id": "cb2b0d59-ba2d-42af-ad21-a078b8fb86d3",
      "name": "Combine Clips",
      "credentials": {
        "httpHeaderAuth": {
          "id": "N0ydyTolezLzEPor",
          "name": "Header Auth account 2"
        }
      }
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776186,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604680,
                "operator": "empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        960,
        3088
      ],
      "id": "24752ef1-d512-4c6f-9722-a14e296fb9c5",
      "name": "Get Videos",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Combine Video & Audio",
        "height": 240,
        "width": 720,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        944,
        3360
      ],
      "id": "d5647ac1-1a74-4045-b52e-e716909bbc0b",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "## Combine clips into 1 video",
        "height": 284,
        "width": 1364,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        944,
        2992
      ],
      "id": "d7dfb2a5-d3aa-4b0b-ad7e-980722c8d963",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:8080/v1/video/caption",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"video_url\": \"{{ $json['Video + Audio URL'] }}\",\n  \"settings\": {\n    \"line_color\": \"#FFFFFF\",\n    \"word_color\": \"#FFF200\",\n    \"all_caps\": true,\n    \"max_words_per_line\": 3,\n    \"font_size\": 108,\n    \"bold\": false,\n    \"italic\": false,\n    \"underline\": false,\n    \"strikeout\": false,\n    \"outline_width\": 4,\n    \"shadow_offset\": 2,\n    \"style\": \"highlight\",\n    \"font_family\": \"The Bold Font\",\n    \"position\": \"bottom_center\"\n  },\n  \"id\": \"{{ $json.id }}\"\n}",
        "options": {
          "timeout": 9000000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1184,
        3744
      ],
      "id": "db12f1e8-e4a3-47be-a200-dbc128064b9f",
      "name": "Create Captions",
      "credentials": {
        "httpHeaderAuth": {
          "id": "N0ydyTolezLzEPor",
          "name": "Header Auth account 2"
        }
      }
    },
    {
      "parameters": {
        "content": "## Add Captions",
        "height": 240,
        "width": 720,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        944,
        3664
      ],
      "id": "4d2c14f3-b76d-4bd1-beac-b8cd68553475",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=The Topic:\n{{ $json.text }}",
        "messages": {
          "messageValues": [
            {
              "message": "=# ROLE\n\nYou are a Senior Financial Commentator and Script Editor. Your persona is a \"Knowledgeable Realist\"â€”blending the conversational, unscripted flow of a top-tier streamer with the deep structural discipline of a macro analyst.\n\n\n# THE GOAL\n\nRewrite raw transcripts into a high-performance 70/30 Fusion Commentary Script:\n\n- 70% Structural Analysis: Focus on mechanics, incentives, debt, and the \"Broken Rules\" of finance.\n\n- 30% Urgent Catalyst: Anchor the analysis to specific dates, upcoming events, or systemic \"bombs\".\n\n\n# TONE & VOICE\n\n- Direct & Skeptical: Opinionated about logic, not people. Critique arguments with math, not emotion.\n\n- Dramatic Tension (30%): Use punchy urgency in hooks and pivots\n\n- Metaphorical Precision: Use one high-stakes imagery per script\n\n- Professional Vocabulary: Strictly avoid internet/gamer slang (no \"chat,\" \"boys,\" or \"cringe\").\n\n\n# ENGAGEMENT & LOGIC FRAMEWORK\n\n- The 10-Second Payoff: State the topic, why it matters now, and hint at what they will understand by the end.\n\n- Narrative Anchor (Required): Create one named idea per script (e.g., â€œThe Repatriation Mythâ€). Repeat it 2â€“3 times to reinforce memory.\n\n- Cause â†’ Effect Loops: Every major point must show: Policy â†’ Mechanic â†’ Consequence â†’ Who it hits.\n\n- Pattern Interrupts: Drop short standalone truths every 60â€“90 seconds\n\n\n# EDITORIAL STRUCTURE (Internal Logic)\n\n1. The Hook: High-tension immediacy.\n\n2. The Surface: Briefly acknowledge the headline narrative to hook search-intent viewers.\n\n3. The Pivot: Build tension: \"Everyone's saying X. But here's the hidden crack no one's watching.\"\n\n4. The Deep Dive: The bulk of the script (70% mechanics). Weave in historical parallels (e.g., 1929, 2008).\n\n5. The Nuance: Challenge emotional reactions/apocalypse framing.\n\n6. The Takeaway: Grounded outcome.\n\n\n# WRITING RULES\n\n- Sentence Rhythm: Short, punchy sentences. Fragments allowed for emphasis.\n\n- Conciseness: If a line doesnâ€™t add information, cut it. No flowery descriptions.\n\n- Pattern Interrupts: Use 1-2 standalone single lines per script for hard truths.\n\n- Formatting: Plain text for delivery. No bolding. No headers in the script.\n\nINPUT TRANSCRIPT: {{ $json.text }}\n\nOUTPUT INSTRUCTIONS: Produce ONLY the spoken-word script. Execute the Hook Protocol immediately."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1216,
        384
      ],
      "id": "d9881ea1-0ded-48d0-b22c-b6cabe88bde9",
      "name": "Script Writer ðŸ§ "
    },
    {
      "parameters": {
        "model": "deepseek/deepseek-v3.2",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1280,
        592
      ],
      "id": "0471631f-da42-420b-8ea3-9981b287608e",
      "name": "OpenRouter - Deepseek",
      "credentials": {
        "openRouterApi": {
          "id": "WwFsBIGbdM1v2Glq",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"A high-CTR title under 60 chars. Must highlight a paradox, a broken mechanism, or a hidden cost. No 'How to'.\"\n    },\n    \"description_hook\": {\n      \"type\": \"string\",\n      \"description\": \"The first 2-3 sentences of the description. Structure: State the conventional wisdom, then immediately contradict it with the 'scary truth'.\"\n    },\n    \"hashtags\": {\n      \"type\": \"string\",\n      \"description\": \"5-7 relevant hashtags separated by spaces. Example: #Economy #Gold #Recession\"\n    }\n  },\n  \"required\": [\n    \"title\",\n    \"description_hook\",\n    \"hashtags\"\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        1632,
        592
      ],
      "id": "a7e7185e-77b2-4f17-ba5f-9248705c3b5b",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "operation": "create",
        "databaseId": 339384,
        "tableId": 776186,
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6602459,
              "fieldValue": "={{ $('Script Writer ðŸ§ ').item.json.text }}"
            },
            {
              "fieldId": 6602458,
              "fieldValue": "={{ $json.output.title }}"
            },
            {
              "fieldId": 6604681,
              "fieldValue": "={{ $json.output.description_hook }} \n\n{{ $json.output.hashtags }}\n\nðŸ”” Subscribe to Financial History and Markets to master the cycles of history and navigate the complexity of modern markets.\n\nâš ï¸ Disclaimer: All content is for educational and illustrative purposes only; it does not constitute financial, investment, or legal advice. Markets carry inherent risks, and historical precedents are not guarantees of future outcomes.\n\nâš ï¸ AI Transparency: This video uses AI-assisted visuals and narration. All research, analysis, and scripting are done by me, the author."
            },
            {
              "fieldId": 6676023,
              "fieldValue": "={{ $('1st Pass').item.json.text }}"
            },
            {
              "fieldId": 6602460,
              "fieldValue": "true"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1776,
        384
      ],
      "id": "c9238034-9814-4d45-9b69-fbab9122b2b7",
      "name": "Upload Fields to Baserow",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Here are the raw notes for the video:\n{{ $json.text }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=You are a viral YouTube strategist for a 'Macro-Doom' finance channel.\nYour goal is to generate titles that trigger immediate fear or curiosity (FOMO).\n\n### THE RULE OF ABSOLUTES\n- NEVER describe a process (e.g., \"Market is slowing,\" \"Yields are rising,\" \"Pushing a domino\").\n- ALWAYS declare the RESULT (e.g., \"The Dollar Died,\" \"The Market is Fake,\" \"Japan Broke It\").\n- The event must sound like it has ALREADY happened or is INEVITABLE.\n\n### STRICT TITLE FORMULAS (USE THESE ONLY):\n1. The \"Broken\" Frame: \"[Subject] Just Broke the [Object]\"\n   (e.g., \"Japan Just Broke the Global Economy\")\n2. The \"Lie\" Frame: \"The [Subject] Lie No One Is Telling\"\n   (e.g., \"The Inflation Lie No One Is Telling\")\n3. The \"Paradox\" Frame: \"Why [Subject] is Defying Logic\"\n   (e.g., \"Why Gold is Defying Logic\")\n4. The \"Finality\" Frame: \"The End of [Subject] is Here\"\n   (e.g., \"The End of the US Dollar\")\n\n### INSTRUCTIONS:\n1. Analyze the user notes for the most dangerous mechanism.\n2. Select one of the \"Title Formulas\" above that fits best.\n3. Apply aggressive vocabulary: VAPORIZED, ENGINEERED, TRAP, DEAD, FAKE, ZERO.\n\n### OUTPUT JSON:\n{\n  \"title\": \"Under 50 chars. High impact. No metaphors.\",\n  \"description_hook\": \"Sentence 1: State what the textbook says (The Lie). Sentence 2: State the brutal reality (The Mechanism).\",\n  \"hashtags\": \"5-7 broad, high-volume tags.\"\n}"
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1488,
        384
      ],
      "id": "afc02c97-c304-4f77-9ec0-8ce731201f29",
      "name": "Title Generator"
    },
    {
      "parameters": {
        "content": "## Create script & title",
        "height": 468,
        "width": 1148,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        912,
        288
      ],
      "id": "9933522b-3758-4c50-a0eb-ad284308bbd7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Generate scenes & image prompts\n",
        "height": 416,
        "width": 1852,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        912,
        1264
      ],
      "id": "21b29dc1-ae47-429a-81aa-71d3576dd9bc",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## Generate Captions from TTS",
        "height": 276,
        "width": 1448,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        912,
        864
      ],
      "id": "a7a64e5c-d0f6-4897-bbc0-c3738957097b",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Image Generation",
        "height": 328,
        "width": 1280,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        928,
        2160
      ],
      "id": "92c96d3d-99b8-49f0-b751-2ac4c84e637e",
      "name": "Sticky Note11"
    },
    {
      "parameters": {
        "content": "## Create clips from images\n",
        "height": 352,
        "width": 1832,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        944,
        2560
      ],
      "id": "ce363b37-601e-474e-811f-44f1c3ffd10a",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "model": "deepseek/deepseek-chat-v3.1",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        1568,
        1504
      ],
      "id": "60049a09-99ee-460a-a665-6a61cc9f7d3b",
      "name": "OpenRouter - Deepseek3",
      "credentials": {
        "openRouterApi": {
          "id": "WwFsBIGbdM1v2Glq",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"Prompt\": \"enter prompt here\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        1712,
        1504
      ],
      "id": "a8ac98e2-71c1-4617-8ecb-07e2e634a8ab",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "include": "specifiedFields",
        "fieldsToInclude": "id",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2080,
        1312
      ],
      "id": "04561b1c-7e9d-4821-80ff-54cc41a717cc",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Input Transcript:\n{{ $json.fullText }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=ROLE: You are a Lead Research Analyst. Your job is to extract the \"Signal\" from the \"Noise\" for a senior scriptwriter.\n\nTHE TASK: Process the Input Transcript into a clean, logical briefing.\n\nOPERATIONAL RULES:\n1. STRICTLY REMOVE FLUFF: Delete all host introductions, channel plugs (\"subscribe,\" \"link below,\" \"smash the like\"), sales pitches (\"join our membership\"), and verbal filler.\n2. CONSOLIDATE LOGIC: If the speaker repeats the same point three times, state it once clearly.\n3. PRESERVE HARD DATA: Do NOT summarize numbers. Keep every specific yield percentage, debt amount ($), date, and financial metric exactly as stated.\n4. RESTRUCTURE: Organize the text into a logical flow: Context -> The Trigger -> The Mechanism -> The Implication.\n\nOUTPUT: Provide ONLY the cleaned, dense narrative text. No bullet points, no headers."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        944,
        384
      ],
      "id": "037428ba-7809-4e88-80be-ba432f4c23a9",
      "name": "1st Pass"
    },
    {
      "parameters": {
        "content": "## Pull Raw Transcript & Idea",
        "height": 420,
        "width": 1180,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        896,
        -192
      ],
      "id": "3763a2da-fcaa-40fa-8a9f-ae81a290c878",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "fileSelector": "=/home/node/.n8n-files/temp_video_{{ $runIndex }}.mp4",
        "options": {
          "fileName": "data"
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1.1,
      "position": [
        2000,
        2720
      ],
      "id": "5b50df43-92eb-4f74-91e3-4d178a62b767",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        928,
        -112
      ],
      "id": "bcb80506-8a0a-42fe-ad7c-cc74a94173e8",
      "name": "Video Link",
      "webhookId": "622301e9-023b-4345-80e9-e2315d779287"
    },
    {
      "parameters": {
        "operation": "getTranscript",
        "videoUrl": "={{ $json.chatInput }}"
      },
      "type": "n8n-nodes-supadata.supadata",
      "typeVersion": 1,
      "position": [
        1120,
        -112
      ],
      "id": "5acdea46-df80-467b-8ae4-66c93e644e74",
      "name": "Get Transcript API",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "supadataApi": {
          "id": "4pV75SGmYCEwlIUJ",
          "name": "Supadata account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// This looks for 'content' in the most recent node's output\nconst content = $input.item.json.content || $input.item.json.result?.content;\n\nif (!content) {\n  return { json: { fullText: \"Transcript still processing or not found.\" } };\n}\n\nreturn {\n  json: {\n    fullText: content.map(segment => segment.text).join(' ')\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1744,
        -128
      ],
      "id": "f642cde1-4806-413f-956f-0b97f2bb9b0d",
      "name": "SRT file Reformat"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "dbd1c561-9072-44de-b677-a07d9fc29dbd",
              "leftValue": "=={{ $json.content?.[0]?.text ?? \"\" }}\n",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1344,
        -112
      ],
      "id": "a1f71fab-7f36-4f9d-b4d6-aa3ae9fe46b3",
      "name": "If (For Longer Vids)"
    },
    {
      "parameters": {
        "amount": 60
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        1472,
        48
      ],
      "id": "eaa97ccf-fe2d-4c7d-a7b9-3f8010343179",
      "name": "Wait 60s",
      "webhookId": "0310914e-baa2-4ea5-a4ea-f56a3715e69c"
    },
    {
      "parameters": {
        "url": "=https://api.supadata.ai/v1/transcript/{{ $json.jobId }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supadataApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1600,
        48
      ],
      "id": "c7008686-4be4-410d-8c98-887075b4b555",
      "name": "Get Transcript Again",
      "credentials": {
        "httpHeaderAuth": {
          "id": "N0ydyTolezLzEPor",
          "name": "Header Auth account 2"
        },
        "supadataApi": {
          "id": "4pV75SGmYCEwlIUJ",
          "name": "Supadata account"
        }
      }
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776186,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604538,
                "operator": "not_empty"
              },
              {
                "field": 6604582,
                "operator": "empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        960,
        960
      ],
      "id": "fb4b4b8c-60f8-4577-998c-57a757206ba1",
      "name": "Get Rows from Baserow",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json['tts audio'][0]['url'] }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1168,
        960
      ],
      "id": "04cb45e9-e290-4f64-a21e-5e2cbc35731d",
      "name": "GET TTS Audio"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/audio/transcriptions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "=data"
            },
            {
              "name": "model",
              "value": "whisper-1"
            },
            {
              "name": "response_format",
              "value": "verbose_json"
            },
            {
              "name": "timestamp_granularities[]",
              "value": "word"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1344,
        960
      ],
      "id": "24538858-d038-4782-bb76-a4ba5a2b251f",
      "name": "Transcripte TTS Audio",
      "credentials": {
        "openAiApi": {
          "id": "IwPHIdqTQqLEO1sY",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.baserow.io/api/user-files/upload-file/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1952,
        960
      ],
      "id": "047be5f0-2b32-4855-a391-0c49e0878ab8",
      "name": "Post to Baserow",
      "credentials": {
        "httpHeaderAuth": {
          "id": "gvKd90Uzwvft8lDn",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776186,
        "rowId": "={{ $('Get Rows from Baserow').item.json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604582,
              "fieldValue": "={{ $('Post to Baserow').item.json.url }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        2160,
        960
      ],
      "id": "441ebc30-58f6-474a-aa72-322cfd037926",
      "name": "Update Rows in Baserow",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Fail Loop (Run if blank scenes are noticed in Baserow)\n",
        "height": 352,
        "width": 1260,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        928,
        1760
      ],
      "id": "c42725d7-a02e-432e-9b2f-25255a3d247b",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776186,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604582,
                "operator": "not_empty"
              },
              {
                "field": 6604674,
                "operator": "empty"
              },
              {
                "field": 6604680,
                "operator": "empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        976,
        1312
      ],
      "id": "b9de98ce-9629-4493-97fe-69f0b97c9544",
      "name": "Get Rows from Baserow 2",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json['captions url'] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1184,
        1312
      ],
      "id": "a3d13ebc-9262-43e5-8fdc-787546a239fa",
      "name": "Get Captions"
    },
    {
      "parameters": {
        "jsCode": "// =========================================================\n// 1. GET PARENT ID (The Video ID)\n// =========================================================\n// We grab the ID from the node before the HTTP Request\n// Ensure the node name matches exactly what is in your canvas\nconst parentId = $('Get Rows from Baserow 2').first().json.id;\n\n// =========================================================\n// 2. HELPER FUNCTIONS\n// =========================================================\nfunction srtToSeconds(srtTime) {\n  const [h, m, s] = srtTime.replace(\",\", \".\").split(\":\");\n  return (+h * 3600) + (+m * 60) + parseFloat(s);\n}\n\n// Clean floating point artifacts (Round to 4 decimals)\nfunction cleanFloat(num) {\n  return Math.round(num * 10000) / 10000;\n}\n\n// =========================================================\n// 3. PARSE SRT\n// =========================================================\nconst rawSrt = $input.first().json.data;\nconst blocks = rawSrt.trim().split(/\\n\\s*\\n/);\n\nconst parsed = blocks\n  .map((block) => {\n    const lines = block.split(\"\\n\");\n    if (lines.length < 3) return null;\n\n    const [startStr, endStr] = lines[1].split(\" --> \");\n    return { \n      start_time: srtToSeconds(startStr),\n      end_time: srtToSeconds(endStr),\n      word: lines.slice(2).join(\" \").trim()\n    };\n  })\n  .filter(Boolean);\n\n// =========================================================\n// 4. BUILD OUTPUT\n// =========================================================\nreturn parsed.map((cur, i) => {\n  const next = parsed[i + 1];\n  \n  // Raw Calculations\n  const raw_segment_end = next ? next.start_time : cur.end_time;\n  const raw_duration = Math.max(0, raw_segment_end - cur.start_time);\n  const raw_speech = Math.max(0, cur.end_time - cur.start_time);\n  const raw_gap = next ? Math.max(0, next.start_time - cur.end_time) : 0;\n\n  return {\n    json: {\n      parent_id: parentId, // <--- CRITICAL UPDATE: Passes the Video ID forward\n      id: i + 1,\n      word: cur.word,\n      start_time: cleanFloat(cur.start_time),\n      end_time: cleanFloat(cur.end_time),\n      segment_end: cleanFloat(raw_segment_end),\n      speech_duration: cleanFloat(raw_speech),\n      gap_to_next: cleanFloat(raw_gap),\n      duration: cleanFloat(raw_duration)\n    }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1392,
        1312
      ],
      "id": "22e8ea2a-034a-41b7-9ea6-4e9c0a84b6d4",
      "name": "Clean Up Timing"
    },
    {
      "parameters": {
        "jsCode": "// =========================================================\n// INPUT HANDLING\n// =========================================================\nconst input = $input.first().json;\nconst words = input.words || (input.text ? input.text.words : []);\nconst segments = input.segments || [];\n\n// SAFE ID FETCH\nlet parentId = \"TEST_MODE_ID\"; \ntry {\n    const parentNode = $('Get Rows from Baserow') || $('Get Rows from Baserow 2'); \n    if (parentNode && parentNode.first()) {\n        parentId = parentNode.first().json.id;\n    }\n} catch (e) {}\n\n// =========================================================\n// CONFIGURATION: SEMANTIC VISUAL PACING\n// =========================================================\nconst MIN_SCENE = 2.0;       \nconst SOFT_CAP = 4.5;        \nconst HARD_CAP = 8.5;        \nconst SILENCE_THRESH = 0.12; \n\n// BAD ENDINGS: Never cut on these words\nconst BAD_ENDINGS = new Set(['the', 'a', 'an', 'and', 'or', 'of', 'in', 'to', 'is', 'at', 'with', 'for']);\n\n// =========================================================\n// PASS 1: ATOMIZER\n// =========================================================\nconst segmentEndTimes = new Set(segments.map(s => Math.round(s.end * 100)));\nfunction isSegmentEnd(seconds) { return segmentEndTimes.has(Math.round(seconds * 100)); }\n\n// Helper for SRT Time format (Required for your File Saver)\nfunction toSRTTime(seconds) {\n  const date = new Date(0);\n  date.setSeconds(seconds);\n  const time = date.toISOString().substr(11, 8);\n  const ms = (seconds % 1).toFixed(3).substring(2);\n  return `${time},${ms}`;\n}\n\nlet allPhrases = [];\nlet currentPhrase = { words: [], start: null, end: null, text: \"\" };\n\nfunction flushPhrase(isHardStop = false) {\n  if (currentPhrase.words.length > 0) {\n    currentPhrase.start = currentPhrase.words[0].start;\n    currentPhrase.end = currentPhrase.words[currentPhrase.words.length - 1].end;\n    currentPhrase.duration = currentPhrase.end - currentPhrase.start;\n    currentPhrase.text = currentPhrase.words.map(w => w.word).join(\" \").trim();\n    currentPhrase.isSentenceEnd = isHardStop || isSegmentEnd(currentPhrase.end);\n    allPhrases.push(currentPhrase);\n    currentPhrase = { words: [], start: null, end: null, text: \"\" };\n  }\n}\n\nwords.forEach((w, index) => {\n  currentPhrase.words.push(w);\n  const isSentenceBreak = isSegmentEnd(w.end);\n  let isSilenceBreak = false;\n  const nextWord = words[index + 1];\n  \n  if (nextWord && (nextWord.start - w.end >= SILENCE_THRESH)) isSilenceBreak = true;\n  const currentDuration = (w.end - (currentPhrase.words[0] ? currentPhrase.words[0].start : w.start));\n\n  if (isSentenceBreak) flushPhrase(true);\n  else if (isSilenceBreak) flushPhrase(false);\n  else if (currentDuration > 4.0) flushPhrase(false);\n});\nflushPhrase();\n\n// =========================================================\n// PASS 2: COMPOSER (Semantic Aware)\n// =========================================================\nlet finalScenes = [];\nlet buffer = { phrases: [], duration: 0 };\n\nallPhrases.forEach((phrase, index) => {\n  const isLast = index === allPhrases.length - 1;\n  const newDuration = buffer.duration + phrase.duration;\n  \n  let endsWithBadWord = false;\n  if (buffer.phrases.length > 0) {\n      const lastTxt = buffer.phrases[buffer.phrases.length - 1].text;\n      const lastWord = lastTxt.split(' ').pop().toLowerCase().replace(/[^a-z]/g, '');\n      if (BAD_ENDINGS.has(lastWord)) endsWithBadWord = true;\n  }\n\n  if (buffer.phrases.length === 0) {\n    buffer.phrases.push(phrase);\n    buffer.duration = phrase.duration;\n  } \n  else {\n    if (endsWithBadWord) {\n         buffer.phrases.push(phrase);\n         buffer.duration = newDuration;\n    }\n    else if (buffer.phrases[buffer.phrases.length-1].isSentenceEnd && buffer.duration > MIN_SCENE) {\n        finalScenes.push(buffer);\n        buffer = { phrases: [phrase], duration: phrase.duration };\n    }\n    else if (buffer.duration > SOFT_CAP) {\n        finalScenes.push(buffer);\n        buffer = { phrases: [phrase], duration: phrase.duration };\n    }\n    else if (newDuration > HARD_CAP) {\n        finalScenes.push(buffer);\n        buffer = { phrases: [phrase], duration: phrase.duration };\n    }\n    else {\n        buffer.phrases.push(phrase);\n        buffer.duration = newDuration;\n    }\n  }\n  \n  if (isLast) {\n    if (buffer.duration < 2.0 && finalScenes.length > 0) {\n      const prevScene = finalScenes[finalScenes.length - 1];\n      if (prevScene.duration + buffer.duration < HARD_CAP + 2.0) {\n        prevScene.phrases.push(...buffer.phrases);\n        prevScene.duration += buffer.duration;\n        buffer = null; \n      }\n    }\n    if (buffer) finalScenes.push(buffer);\n  }\n});\n\n// =========================================================\n// OUTPUT (With SRT Content Restored)\n// =========================================================\nlet srt = '';\nconst mappedSegments = finalScenes.map((scene, i) => {\n  const start = scene.phrases[0].start;\n  const end = scene.phrases[scene.phrases.length - 1].end;\n  const text = scene.phrases.map(p => p.text).join(\" \");\n  \n  // Re-added this line to fix the error in the next node\n  srt += `${i + 1}\\n${toSRTTime(start)} --> ${toSRTTime(end)}\\n${text}\\n\\n`;\n  \n  return {\n    parent_id: parentId,\n    id: i + 1,\n    word: text,\n    start_time: Math.round(start * 100) / 100,\n    end_time: Math.round(end * 100) / 100,\n    duration: Math.round((end - start) * 100) / 100\n  };\n});\n\n// Output BOTH the SRT string (for the File node) and Segments (for the Loop)\nreturn [{ json: { srtContent: srt, Segments: mappedSegments } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1536,
        960
      ],
      "id": "567c3d9f-0a14-4b53-95e3-ec1b49d6427d",
      "name": "Scene Splitter"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.word }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=Role: You are a Satirical Financial Art Director.\nTask: Translate the \"Input Text\" below into a physical, finance-themed visual scene.\nFormat: Output ONLY the JSON object below.\n\nInput Text: {{ $json.word }}\n\nRules for Translation:\n1. **Theme:** The visual must relate to the world of macroeconomics, crypto, or finance.\n2. **Creativity:** You have total freedom to invent the visual metaphor.\n3. **Constraint:** Ensure the description is of a physical object or scene (no abstract text), suitable for a heavy texture painting.\n\nOutput Template:\n{\n  \"Prompt\": \"A thick impasto oil painting with a clear central subject dominating the frame: [INSERT YOUR FINANCIAL VISUAL TRANSLATION HERE]. Heavy palette-knife application, layered paint ridges, visible canvas grain. Loose but legible forms, uncluttered composition. Use natural, scene-appropriate lighting and mood. Color and emotion should come from the subject itself. Analog hand-painted fine art, non-digital, painterly realism.\"\n}"
            }
          ]
        },
        "batching": {
          "batchSize": 1,
          "delayBetweenBatches": 500
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1568,
        1312
      ],
      "id": "4e452894-74b8-4286-b0cb-97dc321af88e",
      "name": "Scene Image Prompter",
      "retryOnFail": false,
      "waitBetweenTries": 5000,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "create",
        "databaseId": 339384,
        "tableId": 776290,
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604660,
              "fieldValue": "={{ $json.output.Prompt }}"
            },
            {
              "fieldId": 6604661,
              "fieldValue": "={{$('Clean Up Timing').item.json.duration}}"
            },
            {
              "fieldId": 6631814,
              "fieldValue": "={{$('Clean Up Timing').item.json.segment_end}}"
            },
            {
              "fieldId": 6647664,
              "fieldValue": "={{ $('Clean Up Timing').item.json.word }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1888,
        1312
      ],
      "id": "896d62bb-7912-425d-87e6-6b206fc9f619",
      "name": "Create Row in Baserow",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776186,
        "rowId": "={{ $('Get Rows from Baserow 2').first().json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604674,
              "fieldValue": "={{ $json.ids }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        2464,
        1312
      ],
      "id": "e9dc4dcb-bc67-4e50-86a1-7f48b6f6b27b",
      "name": "Update Rows in Baserow 2",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Initialize an array to hold IDs\nconst ids = [];\n\n// Loop over input items\nfor (const item of $input.all()) {\n  // Loop through each 'data' array\n  for (const dataItem of item.json.data) {\n    // Check if 'id' is defined\n    if (dataItem.id) {\n      // Push the ID into the array\n      ids.push(dataItem.id);\n    }\n  }\n}\n\n// Return the array wrapped in an object\nreturn [{ json: { ids } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2272,
        1312
      ],
      "id": "cd2d086e-8c45-474e-88d5-7ec652ec5276",
      "name": "Extract Scene IDs"
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776290,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6647664,
                "operator": "not_empty"
              },
              {
                "field": 6604660,
                "operator": "empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        960,
        1872
      ],
      "id": "d3f6ba12-a5a5-49ad-b217-4c4dded15dbe",
      "name": "Get Rows from Baserow 3",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1168,
        1872
      ],
      "id": "31781ba9-69b1-4032-ba8f-c292a4e8d8ef",
      "name": "Loop Over Items 2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json['initial prompt'] }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=Role: You are a Satirical Financial Art Director.\nTask: Translate the \"Input Text\" below into a physical, finance-themed visual scene.\nFormat: Output ONLY the JSON object below.\n\nInput Text: {{ $json['initial prompt'] }}\n\nRules for Translation:\n1. **Theme:** The visual must relate to the world of macroeconomics, crypto, or finance.\n2. **Creativity:** You have total freedom to invent the visual metaphor.\n3. **Constraint:** Ensure the description is of a physical object or scene (no abstract text), suitable for a heavy texture painting.\n\nOutput Template:\n{\n  \"Prompt\": \"A thick impasto oil painting with a clear central subject dominating the frame: [INSERT YOUR FINANCIAL VISUAL TRANSLATION HERE]. Heavy palette-knife application, layered paint ridges, visible canvas grain. Loose but legible forms, uncluttered composition. Use natural, scene-appropriate lighting and mood. Color and emotion should come from the subject itself. Analog hand-painted fine art, non-digital, painterly realism.\"\n}"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1392,
        1888
      ],
      "id": "546332df-eea6-4e1b-a430-252aa73cb8ff",
      "name": "Scene Image Prompter 2"
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776290,
        "rowId": "={{ $('Loop Over Items 2').item.json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604660,
              "fieldValue": "={{ $json.output.Prompt }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1680,
        1888
      ],
      "id": "08300b23-9e28-46f9-a226-703f33e44658",
      "name": "Update Rows in Baserow 3",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "workflow": "={\n  \"6\": {\n    \"inputs\": {\n      \"text\": \"{{ $('Get Scenes').item.json.Prompt }} juanpasto painting\",\n      \"clip\": [\n        \"198\",\n        1\n      ]\n    },\n    \"class_type\": \"CLIPTextEncode\",\n    \"_meta\": {\n      \"title\": \"CLIP Text Encode (Prompt)\"\n    }\n  },\n  \"27\": {\n    \"inputs\": {\n      \"vae_name\": \"ae.safetensors\"\n    },\n    \"class_type\": \"VAELoader\",\n    \"_meta\": {\n      \"title\": \"Load VAE\"\n    }\n  },\n  \"162\": {\n    \"inputs\": {\n      \"width\": 2560,\n      \"height\": 1440,\n      \"batch_size\": 1\n    },\n    \"class_type\": \"EmptySD3LatentImage\",\n    \"_meta\": {\n      \"title\": \"EmptySD3LatentImage\"\n    }\n  },\n  \"163\": {\n    \"inputs\": {\n      \"seed\": {{ Math.floor(Math.random() * 999999999) }},\n      \"steps\": 5,\n      \"cfg\": 1,\n      \"sampler_name\": \"dpmpp_sde\",\n      \"scheduler\": \"beta\",\n      \"denoise\": 1,\n      \"model\": [\n        \"191\",\n        0\n      ],\n      \"positive\": [\n        \"6\",\n        0\n      ],\n      \"negative\": [\n        \"190\",\n        0\n      ],\n      \"latent_image\": [\n        \"162\",\n        0\n      ]\n    },\n    \"class_type\": \"KSampler\",\n    \"_meta\": {\n      \"title\": \"KSampler\"\n    }\n  },\n  \"164\": {\n    \"inputs\": {\n      \"samples\": [\n        \"163\",\n        0\n      ],\n      \"vae\": [\n        \"27\",\n        0\n      ]\n    },\n    \"class_type\": \"VAEDecode\",\n    \"_meta\": {\n      \"title\": \"VAE Decode\"\n    }\n  },\n  \"171\": {\n    \"inputs\": {\n      \"filename_prefix\": \"img\",\n      \"images\": [\n        \"164\",\n        0\n      ]\n    },\n    \"class_type\": \"SaveImage\",\n    \"_meta\": {\n      \"title\": \"Save Image Original\"\n    }\n  },\n  \"188\": {\n    \"inputs\": {\n      \"unet_name\": \"z_image_turbo_bf16.safetensors\",\n      \"weight_dtype\": \"default\"\n    },\n    \"class_type\": \"UNETLoader\",\n    \"_meta\": {\n      \"title\": \"Load Diffusion Model\"\n    }\n  },\n  \"189\": {\n    \"inputs\": {\n      \"clip_name\": \"qwen_3_4b.safetensors\",\n      \"type\": \"lumina2\",\n      \"device\": \"default\"\n    },\n    \"class_type\": \"CLIPLoader\",\n    \"_meta\": {\n      \"title\": \"Load CLIP\"\n    }\n  },\n  \"190\": {\n    \"inputs\": {\n      \"conditioning\": [\n        \"6\",\n        0\n      ]\n    },\n    \"class_type\": \"ConditioningZeroOut\",\n    \"_meta\": {\n      \"title\": \"ConditioningZeroOut\"\n    }\n  },\n  \"191\": {\n    \"inputs\": {\n      \"shift\": 3,\n      \"model\": [\n        \"197\",\n        0\n      ]\n    },\n    \"class_type\": \"ModelSamplingAuraFlow\",\n    \"_meta\": {\n      \"title\": \"ModelSamplingAuraFlow\"\n    }\n  },\n  \"194\": {\n    \"inputs\": {\n      \"sage_attention\": \"auto\",\n      \"allow_compile\": false,\n      \"model\": [\n        \"196\",\n        0\n      ]\n    },\n    \"class_type\": \"PathchSageAttentionKJ\",\n    \"_meta\": {\n      \"title\": \"Patch Sage Attention KJ\"\n    }\n  },\n  \"196\": {\n    \"inputs\": {\n      \"width\": 2560,\n      \"height\": 1440,\n      \"model_type\": \"zimage\",\n      \"method\": \"yarn\",\n      \"yarn_alt_scaling\": 2,\n      \"enable_dype\": 0.1,\n      \"base_resolution\": 1024,\n      \"dype_start_sigma\": 1,\n      \"dype_scale\": 2,\n      \"dype_exponent\": 1,\n      \"base_shift\": 0.5,\n      \"max_shift\": 1.15,\n      \"model\": [\n        \"198\",\n        0\n      ]\n    },\n    \"class_type\": \"DyPE_FLUX\",\n    \"_meta\": {\n      \"title\": \"DyPE\"\n    }\n  },\n  \"197\": {\n    \"inputs\": {\n      \"enable_fp16_accumulation\": true,\n      \"model\": [\n        \"194\",\n        0\n      ]\n    },\n    \"class_type\": \"ModelPatchTorchSettings\",\n    \"_meta\": {\n      \"title\": \"Model Patch Torch Settings\"\n    }\n  },\n  \"198\": {\n    \"inputs\": {\n      \"lora_name\": \"Impasto-JuanPasto-Style-ZIT-LoRA.safetensors\",\n      \"strength_model\": 1,\n      \"strength_clip\": 1,\n      \"model\": [\n        \"188\",\n        0\n      ],\n      \"clip\": [\n        \"189\",\n        0\n      ]\n    },\n    \"class_type\": \"LoraLoader\",\n    \"_meta\": {\n      \"title\": \"Load LoRA\"\n    }\n  }\n}"
      },
      "type": "n8n-nodes-comfyui.comfyui",
      "typeVersion": 1,
      "position": [
        1392,
        2256
      ],
      "id": "bdfcf2b8-6111-43eb-a580-574bcee3a924",
      "name": "ComfyUI - Image Generation",
      "credentials": {
        "comfyUIApi": {
          "id": "7cIpzCySFo5dHufK",
          "name": "ComfyUI account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.baserow.io/api/user-files/upload-file/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1616,
        2256
      ],
      "id": "d2338aa5-e13f-40a2-932c-d58dfb4f7d57",
      "name": "Upload Images to Baserow",
      "credentials": {
        "httpHeaderAuth": {
          "id": "gvKd90Uzwvft8lDn",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776290,
        "rowId": "={{ $('Loop Over Items').item.json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604671,
              "fieldValue": "={{ $json.name }}"
            },
            {
              "fieldId": 6604676,
              "fieldValue": "Processing"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1856,
        2256
      ],
      "id": "ae36afa7-c44d-41f8-86ac-b8b9ec3bca2d",
      "name": "Update Rows in Baserow 4",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "Scenes",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1184,
        2624
      ],
      "id": "8642efef-de38-4e3c-979d-36e3f755bcdb",
      "name": "Split Out 2"
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776186,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604680,
                "operator": "empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        976,
        2624
      ],
      "id": "0b63086c-de5a-403d-95a0-e0ec4381a629",
      "name": "Get Scenes 2",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776290,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604659,
                "value": "={{ $json.id }}"
              },
              {
                "field": 6604672,
                "operator": "empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1376,
        2624
      ],
      "id": "00fb411a-25f7-4784-8537-bcc84c049427",
      "name": "Get Rows from Baserow 4",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1584,
        2624
      ],
      "id": "7734fe10-0cc6-4f80-b8f9-bf446c1b79b6",
      "name": "Loop Over Items "
    },
    {
      "parameters": {
        "command": "=mkdir -p /home/node/.n8n-files && \\\nwget -O /home/node/.n8n-files/temp_image_{{ $runIndex }}.jpg \"{{ $json.Image[0].url }}\" && \\\nffmpeg -y -loop 1 -i /home/node/.n8n-files/temp_image_{{ $runIndex }}.jpg \\\n-vf \"crop=w=2560:h=1440:x=0:y='{{ $runIndex % 2 === 0 ? \"120+(240*(1-t/\" + $json.Duration + \"))\" : \"120+(240*(t/\" + $json.Duration + \"))\" }}',setsar=1\" \\\n-c:v libx264 -crf 18 -t {{ $json.Duration }} -pix_fmt yuv420p -preset fast /home/node/.n8n-files/temp_video_{{ $runIndex }}.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1792,
        2720
      ],
      "id": "f7073be0-81fc-4203-ba38-fe199c173229",
      "name": "FFMPEG - Create the video"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.baserow.io/api/user-files/upload-file/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2208,
        2720
      ],
      "id": "b173847f-a636-4d47-ac1f-52859dca7565",
      "name": "Upload Videos to Baserow",
      "credentials": {
        "httpHeaderAuth": {
          "id": "gvKd90Uzwvft8lDn",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776290,
        "rowId": "={{ $('Loop Over Items ').item.json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604672,
              "fieldValue": "={{ $json.url }}"
            },
            {
              "fieldId": 6604676,
              "fieldValue": "Done"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        2384,
        2720
      ],
      "id": "1ed565df-741d-494b-a3b0-c39334f480cb",
      "name": "Update Rows in Baserow 5",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "command": "=rm /home/node/.n8n-files/temp_image_{{ $runIndex }}.jpg /home/node/.n8n-files/temp_video_{{ $runIndex }}.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2576,
        2720
      ],
      "id": "be13a67b-3fd2-4abf-9ab9-b6521cb06c4e",
      "name": "Delete video clips locally"
    },
    {
      "parameters": {
        "fieldToSplitOut": "Scenes",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1152,
        3088
      ],
      "id": "e447e55e-4426-4cfc-aba1-c45e829fc495",
      "name": "Split Out 1"
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776290,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604659,
                "value": "={{ $json.id }}"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1344,
        3088
      ],
      "id": "7e0c0d08-5930-46a1-8f94-4b2c5bc74220",
      "name": "Get Scenes ",
      "alwaysOutputData": true,
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "Video Clip URL"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1520,
        3088
      ],
      "id": "91edd456-e2ce-4541-b264-b6f82d81abf6",
      "name": "Aggregate 2"
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776186,
        "rowId": "={{ $json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604680,
              "fieldValue": "={{ $json.response }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        2096,
        3088
      ],
      "id": "ca99db28-b63e-41b0-b188-ae179a25e990",
      "name": "Update Rows in Baserow 6",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776186,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604679,
                "operator": "empty"
              },
              {
                "field": 6604680,
                "operator": "not_empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1024,
        3424
      ],
      "id": "5f45ca6c-40cc-4534-858e-a2987c1ec8b2",
      "name": "Get Video & Audio",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:8080/v1/ffmpeg/compose",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"id\": \"audio-layering\",\n    \"inputs\": [\n        {\n            \"file_url\": \"{{ $json['Raw Video URL'] }}\"\n        },\n        {\n            \"file_url\": \"{{ $json['tts audio'][0]['url'] }}\"\n        }\n    ],\n    \"filters\": [\n        {\n            \"filter\": \"[1:a]volume=1[outa]\"\n        }\n    ],\n    \"outputs\": [\n        {\n            \"options\": [\n                {\n                    \"option\": \"-map\",\n                    \"argument\": \"0:v\"\n                },\n                {\n                    \"option\": \"-map\",\n                    \"argument\": \"[outa]\"\n                },\n                {\n                    \"option\": \"-c:v\",\n                    \"argument\": \"copy\"\n                },\n                {\n                    \"option\": \"-c:a\",\n                    \"argument\": \"aac\"\n                }\n            ]\n        }\n    ]\n}\n",
        "options": {
          "timeout": 50000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1232,
        3424
      ],
      "id": "e187a95a-f742-4ba0-b27b-5e22b2b09ad1",
      "name": "Combine Video & Audio",
      "credentials": {
        "httpHeaderAuth": {
          "id": "N0ydyTolezLzEPor",
          "name": "Header Auth account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776186,
        "rowId": "={{ $('Get Video & Audio').item.json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604679,
              "fieldValue": "={{ $json.response[0].file_url }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1440,
        3424
      ],
      "id": "9faf9102-2d87-4bf3-9fe8-756d07d6e968",
      "name": "Update Rows in Baserow 7",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "databaseId": 339384,
        "tableId": 776186,
        "returnAll": true,
        "additionalOptions": {
          "filters": {
            "fields": [
              {
                "field": 6604678,
                "operator": "empty"
              },
              {
                "field": 6604679,
                "operator": "not_empty"
              },
              {
                "field": 6604582,
                "operator": "not_empty"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        992,
        3744
      ],
      "id": "bff3d7c2-a6ca-4235-afaf-55ce33a03911",
      "name": "Get Clips & Captions",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "databaseId": 339384,
        "tableId": 776186,
        "rowId": "={{ $('Get Clips & Captions').item.json.id }}",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": 6604678,
              "fieldValue": "={{ $json.response }}"
            },
            {
              "fieldId": 6602460,
              "fieldValue": "false"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        1376,
        3744
      ],
      "id": "8105954e-62dc-4261-923f-05e4ab767792",
      "name": "Update Rows in Baserow 8",
      "credentials": {
        "baserowApi": {
          "id": "5BFgA4UpsK8GRlHn",
          "name": "Baserow account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Convert to File": {
      "main": [
        [
          {
            "node": "Post to Baserow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Scenes": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "ComfyUI - Image Generation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video URL to Array": {
      "main": [
        [
          {
            "node": "Combine Clips",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combine Clips": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow 6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Videos": {
      "main": [
        [
          {
            "node": "Split Out 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Script Writer ðŸ§ ": {
      "main": [
        [
          {
            "node": "Title Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter - Deepseek": {
      "ai_languageModel": [
        [
          {
            "node": "Script Writer ðŸ§ ",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Title Generator",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "1st Pass",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "Title Generator",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Title Generator": {
      "main": [
        [
          {
            "node": "Upload Fields to Baserow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter - Deepseek3": {
      "ai_languageModel": [
        [
          {
            "node": "Scene Image Prompter",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Scene Image Prompter 2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Scene Image Prompter",
            "type": "ai_outputParser",
            "index": 0
          },
          {
            "node": "Scene Image Prompter 2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Extract Scene IDs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1st Pass": {
      "main": [
        [
          {
            "node": "Script Writer ðŸ§ ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Captions": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow 8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "Get Scenes 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "Upload Videos to Baserow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video Link": {
      "main": [
        [
          {
            "node": "Get Transcript API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Transcript API": {
      "main": [
        [
          {
            "node": "If (For Longer Vids)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SRT file Reformat": {
      "main": [
        [
          {
            "node": "1st Pass",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If (For Longer Vids)": {
      "main": [
        [
          {
            "node": "SRT file Reformat",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait 60s",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait 60s": {
      "main": [
        [
          {
            "node": "Get Transcript Again",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Transcript Again": {
      "main": [
        [
          {
            "node": "SRT file Reformat",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Rows from Baserow": {
      "main": [
        [
          {
            "node": "GET TTS Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET TTS Audio": {
      "main": [
        [
          {
            "node": "Transcripte TTS Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcripte TTS Audio": {
      "main": [
        [
          {
            "node": "Scene Splitter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to Baserow": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Rows from Baserow 2": {
      "main": [
        [
          {
            "node": "Get Captions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Captions": {
      "main": [
        [
          {
            "node": "Clean Up Timing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Clean Up Timing": {
      "main": [
        [
          {
            "node": "Scene Image Prompter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scene Splitter": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scene Image Prompter": {
      "main": [
        [
          {
            "node": "Create Row in Baserow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Row in Baserow": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Scene IDs": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Rows from Baserow 3": {
      "main": [
        [
          {
            "node": "Loop Over Items 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items 2": {
      "main": [
        [],
        [
          {
            "node": "Scene Image Prompter 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scene Image Prompter 2": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow 3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Rows in Baserow 3": {
      "main": [
        [
          {
            "node": "Loop Over Items 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ComfyUI - Image Generation": {
      "main": [
        [
          {
            "node": "Upload Images to Baserow",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Images to Baserow": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow 4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Rows in Baserow 4": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out 2": {
      "main": [
        [
          {
            "node": "Get Rows from Baserow 4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Scenes 2": {
      "main": [
        [
          {
            "node": "Split Out 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Rows from Baserow 4": {
      "main": [
        [
          {
            "node": "Loop Over Items ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items ": {
      "main": [
        [],
        [
          {
            "node": "FFMPEG - Create the video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FFMPEG - Create the video": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Videos to Baserow": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow 5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Rows in Baserow 5": {
      "main": [
        [
          {
            "node": "Delete video clips locally",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete video clips locally": {
      "main": [
        [
          {
            "node": "Loop Over Items ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out 1": {
      "main": [
        [
          {
            "node": "Get Scenes ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Scenes ": {
      "main": [
        [
          {
            "node": "Aggregate 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate 2": {
      "main": [
        [
          {
            "node": "Video URL to Array",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Video & Audio": {
      "main": [
        [
          {
            "node": "Combine Video & Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combine Video & Audio": {
      "main": [
        [
          {
            "node": "Update Rows in Baserow 7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Clips & Captions": {
      "main": [
        [
          {
            "node": "Create Captions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "70692ddf-7e28-47f1-b09e-7e262eb5ddfa",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "9a23dd656dc136b7a946e80b63599231fa365bcdc0c072e76464715260007374"
  },
  "id": "7AlmIcuovYsUNgnd",
  "tags": [
    {
      "updatedAt": "2025-12-31T19:14:12.825Z",
      "createdAt": "2025-12-31T19:14:12.825Z",
      "id": "AFqzIbH4PpbqYCPB",
      "name": "Youtube-Finance"
    }
  ]
}
